<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Working with the Alpine Package Keeper (apk) - Alpine Linux Documentation</title>
        <link rel="canonical" href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html">
        <link rel="stylesheet" href="../../../_/css/site.css">
            </head>
    <body class="article">
        <header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <a class="navbar-item" href="https://docs.alpinelinux.org">
                <img class="navbar-logo" src="../../../_/img/logo.svg" alt="Link to home page">
            </a>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <a class="navbar-item" href="https://docs.alpinelinux.org">Home</a>
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link" href="#">Links</a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="https://alpinelinux.org/">Home page</a>
                        <a class="navbar-item" href="https://wiki.alpinelinux.org/">Wiki</a>
                        <a class="navbar-item" href="https://pkgs.alpinelinux.org/">Package index</a>
                        <a class="navbar-item" href="https://bugs.alpinelinux.org/">Issue tracker</a>
                        <a class="navbar-item" href="https://mirrors.alpinelinux.org/">Mirrors</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</header>
        <div class="main-wrapper">
<div class="navigation-container" data-component="user-handbook" data-version="0.1a">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">User Handbook</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/medium.html">Installation medium</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/medium.html#_architecture">Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/medium.html#_image_type">Image Type</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/medium.html#_downloading">Obtaining</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/medium.html#_using_the_image">Burning</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/medium.html#_usb_drive">USB Drive</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/medium.html#_burning_to_a_cddvd">CD/DVD</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/medium.html#_booting">Booting From the Installation Medium</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/medium.html#_optional_modifying_kernel_command_line">Modifying the Kernel Command Line</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Installing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/setup_alpine.html">Automatic</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/setup_alpine.html#_setup_alpine_q">Quick Mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/setup_alpine.html#_full_setup_alpine">Slower Mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/setup_alpine.html#_answer_files">Seeded Answers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/manual.html">Semi-Automatic</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_keyboard_layout">Keyboard Layout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_hostname">Hostname</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/manual.html#_networking">Networking</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_configure_wireless_networking">Wi-Fi</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_dhcp">DHCP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_static_ip">Static IPs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_dns">DNS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_applying_configuration">Applying</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_timezone">Timezone Information</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_repositories">Package Repositories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_root_password">Setting a Password</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_ssh">Secure SHell</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Installing/manual.html#_ntp">NTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/manual.html#_partitioning_your_disk">Partitioning Your Disk</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_setup_disk">Setup-Disk</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="../Installing/manual.html#_parted">Parted</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../Installing/manual.html#_bios_ms_dos">BIOS + MS-DOS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../Installing/manual.html#_bios_gpt">BIOS + GPT</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../Installing/manual.html#_uefi_gpt">UEFI + GPT</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../Installing/manual.html#_finalizing">Finalizing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="post-install.html">Working With Alpine</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="apk.html">Alpine Package Keeper</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_repositories_releases_and_mirrors">Repositories, Releases and Mirrors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_searching_for_packages">Searching</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_installing_packages">Installing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_upgrading_packages">Upgrading</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_removing_packages">Removing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#_advanced_usage">Advanced Usage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="openrc.html">OpenRC</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="openrc.html#_manipulating_services">Service Manipulation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="openrc.html#_configuring_services">Service Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="openrc.html#_system_status">System Status</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="openrc.html#_advanced_usage">Advanced Usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Handbook</span>
    <span class="version">0.1a</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Developer Handbook</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../developer-handbook/0.1a/index.html">0.1a</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Governance Document</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../governance/0.1a/index.html">0.1a</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Handbook</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.1a</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="../index.html">User Handbook</a></li>
    <li class="crumb"><a href="post-install.html">Working With Alpine</a></li>
    <li class="crumb"><a href="apk.html">Alpine Package Keeper</a></li>
  </ul>
</nav>
</div>
<article class="doc">
<h1>Working with the Alpine Package Keeper (<code>apk</code>)</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><code>apk</code> is the Alpine Package Keeper - the distribution&#8217;s package manager.
It is used to manage the packages (software and otherwise) of the system.
It is the primary method for installing additional software, and is available in the <code>apk-tools</code> package.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_normal_usage"><a class="anchor" href="#_normal_usage"></a>Normal Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_repositories_releases_and_mirrors"><a class="anchor" href="#_repositories_releases_and_mirrors"></a>Repositories, Releases and Mirrors</h3>
<div class="paragraph">
<p><code>apk</code> fetches information about available packages, as well as the packages themselves from various mirrors, which contain various repositories.
Sometimes, those terms are used interchangeably.
Here is a summary of relevant definitions:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Mirror
</td>
<td class="hdlist2">
<p>A website that hosts repositories.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Release
</td>
<td class="hdlist2">
<p>A collection of snapshots of various repositories.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Repository
</td>
<td class="hdlist2">
<p>A category of packages, tied together by some attribute.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Currently, three repositories exist:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">main</dt>
<dd>
<p>Officially supported packages that are reasonable to expect to be in a basic system.</p>
</dd>
<dt class="hdlist1">community</dt>
<dd>
<p>Packages from testing that have been tested.</p>
</dd>
<dt class="hdlist1">testing</dt>
<dd>
<p>New, broken, or outdated packages that need testing. Only available on <code>edge</code>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Two types of releases exist:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">stable (for example 3.16)</dt>
<dd>
<p>Released every 6 months.
Support entails security patches for the given feature versions.
Each stable release has its own <code>main</code> and <code>community</code> repositories.
The <code>main</code> repository is supported for 2 years.
The <code>community</code> repository is only supported for 6 months of its respective release.
A release is considered EOL (End Of Life) when support of its <code>main</code> repo expires.</p>
</dd>
<dt class="hdlist1">edge</dt>
<dd>
<p>A rolling release branch.
It includes newest packages built from the <code>master</code> branch of the aports repository.
It&#8217;s less stable than release branches,
but is stable enough for daily use and is useful for development or if you need up to date software.
It has its own <code>main</code> and <code>community</code> repos, just like stable releases.
It also has the <code>testing</code> repository, which increases the number of available packages significantly.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is technically possible to mix different branches,
that is to say to enable the <code>testing</code> repository while using <code>main</code> and <code>community</code> from stable.
However, this approach is discouraged and will cause breakages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Repositories are configurable in the <code>/etc/apk/repositories</code> file.
Each line corresponds to a repository.
The format is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>[@tag] [protocol][/path][/release]/repository
# comments look like so. valid examples below
http://dl-cdn.alpinelinux.org/alpine/edge/main <i class="conum" data-value="1"></i><b>(1)</b>
@testing http://dl-cdn.alpinelinux.org/alpine/edge/testing <i class="conum" data-value="2"></i><b>(2)</b>
/var/apk/my-packages <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this case, <code>http://</code> is the protocol, <code>dl-cdn.alpinelinux.org/alpine</code> is the path, <code>edge</code> is the release and <code>main</code> is the repository.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>In this case, <code>@testing</code> is the tag. More on this in <a href="#_installing_packages">Installing Packages</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In this case, the repository is a personal one, available on the filesystem of the machine.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This example uses the <code>http://</code> protocol. <code>ftp://</code> and <code>https://</code> protocols are also supported.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This file should already have been been partially populated when you <a href="../Installing/manual.html#_repositories" class="page">installed alpine</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_searching_for_packages"><a class="anchor" href="#_searching_for_packages"></a>Searching for Packages</h3>
<div class="paragraph">
<p>In order to know what package to install, one must be able to find packages.
Alpine has a specialized <a href="https://pkgs.alpinelinux.org">web interface</a> dedicated to looking through various available packages.
However, <code>apk</code> also provides a built-in searching mechanism.
You invoke it by using the <code>apk search</code> subcommand.
You can potentially search for anything in the package index, which, among other things, includes provided binaries and libraries).
Further, globbing is supported.
As such, here are a few examples of searching:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">apk search libsqlite3.so <i class="conum" data-value="1"></i><b>(1)</b>
apk search consul <i class="conum" data-value="2"></i><b>(2)</b>
apk search -e vim <i class="conum" data-value="3"></i><b>(3)</b>
apk search -e so:libsqlite3.so.* <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can search for partial library names.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can also search for binary names.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can exclude partial matches using <code>-e</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>You can specify that what you&#8217;re searching for is a library using the <code>so:</code> prefix (or the <code>cmd:</code> prefix for commands, and <code>pc:</code> prefix for pkg-config files) - it will work with <code>-e</code> (in fact, the prefix is required for this use-case if <code>-e</code> is used).</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_installing_packages"><a class="anchor" href="#_installing_packages"></a>Installing Packages</h3>
<div class="paragraph">
<p>Installing a package means that the package itself will be downloaded from a repository (specified in <code>/etc/apk/repositories</code>) and unpacked to the system.
Existing files will be overwritten.
An exception are configuration files in <code>/etc</code>, which will be preserved.
The configuration files (which comes from the package) will be renamed to <code>*.apk-new</code>.</p>
</div>
<div class="paragraph">
<p>Apk&#8217;s <code>add</code> command is stricter than the <code>search</code> command - wildcards are not available, for instance.
However, the <code>cmd:</code>, <code>so:</code> and <code>pc:</code> prefixes are still available.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While the <code>so:</code> prefix is still available for <code>apk add</code>, it is recommended that you avoid using it.
This is because the provided library SONAME version can increase (for example, <code>libmpack.so.0</code> may get updated, and become <code>libmpack.so.1</code>), in which case this will <strong>not</strong> update libmpack next time you run <code>apk upgrade</code>, and will instead fail.
This is because <code>so:libmpack.so.0</code> directly refers to that specific version of the library, and is typically used by packages, rather than users directly.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While the <code>cmd:</code> and <code>pc:</code> prefix is still available for <code>apk add</code>, you should know that it does not guarantee getting you the exact package you are looking for.
Multiple packages can contain the same executable command or pkg-config definition, but only one will be selected - not necessarily the one you want.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here are a few examples of adding packages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">apk add busybox-extras <i class="conum" data-value="1"></i><b>(1)</b>
apk add bash zsh <i class="conum" data-value="2"></i><b>(2)</b>
apk add cmd:bash cmd:zsh <i class="conum" data-value="3"></i><b>(3)</b>
apk add so:libmpack.so.0 <i class="conum" data-value="4"></i><b>(4)</b>
apk add pc:msgpack <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You must specify the exact package name.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You may add multiple packages at once.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This should be equivalent to the previous example, but specifies the command you are interested in.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>It is possible, but discouraged, to specify specific desired libraries.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Finally, it is possible to specify pkg-config dependencies.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If <code>apk add</code> finds multiple matching packages (for example multiple <code>cmd:</code> matches), it will select the one with the highest version number.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_upgrading_packages"><a class="anchor" href="#_upgrading_packages"></a>Upgrading Packages</h3>
<div class="paragraph">
<p>Updating the system using apk is very simple.
One need only run <code>apk upgrade</code>.
Technically, this is two steps: <code>apk update</code>, followed by <code>apk upgrade</code> proper.
The first step will download an updated package index from the repositories, while the second step will update all packages in <a href="#_world">World</a>, as well as their dependencies.</p>
</div>
<div class="paragraph">
<p><code>apk</code> will avoid overwriting files you may have changed.
These will usually be in the <code>/etc</code> directory.
Whenever <code>apk</code> wants to install a file, but realizes a potentially edited one is already present, it will write its file to that filename with <code>.apk-new</code> appended.
You may handle these by hand, but a utility called <code>update-conf</code> exists.
Simply invoking it normally with present you with the difference between the two files, and offer various choices for dealing with the conflicts.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>apk update</code> is only ran once your cache is invalidated, which by default happens every 4 hours.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_querying_package_information"><a class="anchor" href="#_querying_package_information"></a>Querying Package Information</h3>
<div class="paragraph">
<p>In some cases, it may be useful to inspect packages or files to see various details.
For this use, the <code>info</code> subcommand exists.
It may be used on any package, installed or not, though the information on the latter will be more limited.
It may also be used with specific flags on files.
By default, <code>info</code> will list the package description, webpage and installed size.
For more details (such as a list of flags the subcommand supports), you can use the <code>apk info -h</code> output&#8217;s "Info options" section or see the manual page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_removing_packages"><a class="anchor" href="#_removing_packages"></a>Removing Packages</h3>
<div class="paragraph">
<p>Often, it is desirable to remove a package.
This can be done using the <code>del</code> subcommand, with a base syntax that is identical to the <code>add</code> subcommand.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you added a package using the <code>cmd:</code>, <code>so:</code> or <code>pc:</code> virtual, you must specify the same virtual to remove them.
NOTE: Removing a package will automatically remove all of its dependencies that are otherwise not used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>del</code> subcommand also supports the <code>-r</code> flag, which will remove all packages that depend on the package being removed as well, rather than error out due to the package being needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cleanup"><a class="anchor" href="#_cleanup"></a>Cleanup</h3>
<div class="paragraph">
<p>Many package managers have specific features to "clean up".
A common one is <code>apt</code>, which has an <code>autoremove</code> subcommand.
Apk does this by default when removing packages.</p>
</div>
<div class="paragraph">
<p>It is also possible to clear out the apk cache, assuming it is enabled.
You can do this using <code>apk cache clean</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_usage"><a class="anchor" href="#_advanced_usage"></a>Advanced Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_world"><a class="anchor" href="#_world"></a>World</h3>
<div class="paragraph">
<p>The packages you want to have explicitly installed are listed in the "world file", available in <code>/etc/apk/world</code>.
It is safe to edit it by hand.
If you&#8217;ve edited it by hand, you may run <code>apk add</code> with no arguments to bring the package selection to a consistent state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Virtuals like <code>cmd:</code>, <code>so:</code> and <code>pc:</code> will appear as such in your world file - this is why using <code>so:</code> is discouraged - the soname might get bumped!
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_virtuals"><a class="anchor" href="#_virtuals"></a>Virtuals</h3>
<div class="paragraph">
<p>While <code>cmd:</code>, <code>so:</code> and <code>pc:</code> packages are automatically created virtuals, you can create your own as well.
These allow for quick removal of purpose-specific packages.
See the following examples for details:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sh hljs" data-lang="sh">apk add a b c -t abc <i class="conum" data-value="1"></i><b>(1)</b>
apk del abc <i class="conum" data-value="2"></i><b>(2)</b>
apk add a b c --virtual abc <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This will add the packages "a", "b" and "c" as the dependencies of a virtual package "abc".</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This will remove "abc" and all of its components ("a", "b" and "c"), unless they are required elsewhere.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This is equivalent to the first example.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_swapping_repositories"><a class="anchor" href="#_swapping_repositories"></a>Swapping Repositories</h3>
<div class="paragraph">
<p>When alpine has a new release, the repository path will change.
Assuming you are going forward in time (e.g from <code>3.12</code> to <code>3.13</code>), you can simply edit <code>/etc/apk/repositories</code> and run <code>apk upgrade --available</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Downgrading packages/versions is currently not supported.
While it is technically possible, you are on your own.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
        <footer class="footer">
    <p>Copyright &copy; 2019 Alpine Linux Development Team. All rights reserved.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
    </body>
</html>
